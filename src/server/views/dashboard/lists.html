{% extends "./dashboard.html" %}

{% block dashboard %}
  {% if req.user.isSuperAdmin() or req.user.ListsAdmin() %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-quarter">
        <p><a href="{{ dashboardRoutes.listsEdit.replace(':listId', 'new') }}" class="govuk-link">Create New List</a></p>
      </div>
    </div>
  {% endif %}
  
  {% if lists.length > 0 %}
    <table class="govuk-table">
      <caption class="govuk-table__caption govuk-table__caption--l">
        Lists
      </caption>
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">Service Type</th>
          <th scope="col" class="govuk-table__header">Country</th>
          <th scope="col" class="govuk-table__header govuk-table__header--numeric"></th>
          <th scope="col" class="govuk-table__header govuk-table__header--numeric"></th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for list in lists %}
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">{{ _.startCase(list.type) }}</th>
            <td class="govuk-table__cell">{{ list.country.name }}</td>
            
            <td class="govuk-table__cell govuk-table__cell--numeric">
              {% if userIsListAdministrator(req, list) %}
                <a href="{{ dashboardRoutes.listsEdit.replace(':listId', list.id) }}" class="govuk-link">Settings</a>
              {% endif %}
            </td>

            <td class="govuk-table__cell govuk-table__cell--numeric">
              {% if userIsListEditor(req, list) or userIsListPublisher(req, list) %}
                <a href="{{ dashboardRoutes.listsContentManagement.replace(':listId', list.id) }}" class="govuk-link">Content</a>
              {% endif %}
            </td>            
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
{% extends "./dashboard.njk" %}
{% import "../lists/partials/covid-test-providers/macros.njk" as covidTestProvidersMacros %}
{% import "../lists/partials/lawyers/macros.njk" as lawyersMacros %}
{% import "./macros.njk" as dashboardMacros %}

{% block aside %}
<aside>
  <form action="">
    <div id="checkboxes-a35ae7ee" class="govuk-form-group">
      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">Content type</legend>
        <ul class="govuk-checkboxes">
          <li class="govuk-checkboxes__item">
            <input type="checkbox" name="content_purpose_supergroup[]" id="content_purpose_supergroup-services" value="services" class="govuk-checkboxes__input" data-track-category="filterClicked" data-uncheck-track-category="filterRemoved" data-track-action="Content type" data-track-label="Services" data-controls="js-search-results-info" aria-controls="js-search-results-info">
            <label for="content_purpose_supergroup-services" class="govuk-label govuk-checkboxes__label">Services</label>
          </li>
        </ul>
      </fieldset>
    </div>
  </form>
</aside>

{% endblock %}

{% block dashboard %}

  {% if messages.successBannerTitle %}
    {% set bannerHeading = _.startCase(_.toLower(messages.successBannerHeading)) %}
    {% set title = _.startCase(_.toLower(messages.successBannerTitle)) %}
    {% set colourClass = ".govuk-tag--blue" %}
    {% if messages.successBannerColour === "green" %}
      {% set colourClass = ".govuk-tag--green" %}
    {% elseif messages.successBannerColour === "red" %}
      {% set colourClass = ".govuk-tag--red" %}
    {% endif %}
    {{ dashboardMacros.successBanner(bannerHeading, title, colourClass) }}
  {% endif %}

  <h1 class="govuk-heading-l">
    {{ _.startCase(list.type) }} {{ 'in' if list.country.name }} {{ _.startCase(list.country.name) }}
  </h1>

  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

  <p class="govuk-body">
    Send this link to organisations or individuals so they can apply to be added to the list<br/>
    <a class="govuk-link" target="_blank" rel="noopener noreferrer" href="http{{ 's' if SERVICE_DOMAIN.indexOf('localhost') === -1 }}://{{SERVICE_DOMAIN}}/application/{{_.kebabCase(list.type)}}">
      http{{ 's' if SERVICE_DOMAIN.indexOf('localhost') === -1 }}://{{SERVICE_DOMAIN}}/application/{{_.kebabCase(list.type)}}
    </a>
  </p>

  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

  {% if list.items.length === 0 %}
    <p class="govuk-body">This list is empty</p>
  {% else %}
    <input type="hidden" name="_csrf" id="_csrf" value="{{ csrfToken }}" />
    <ul class="govuk-list dashboard__content-list">
      {% for listItem in list.items %}
        {% include "./partials/list-item-summary.njk" %}
      {% endfor %}
    </ul>
    {{ pagination }}
    {{ dashboardMacros.paginationSection(list.pagination) }}
  {% endif %}

{% endblock %}

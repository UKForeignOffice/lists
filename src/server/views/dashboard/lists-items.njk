{% extends "layout.njk" %}
{% import "../lists/partials/covid-test-providers/macros.njk" as covidTestProvidersMacros %}
{% import "../lists/partials/lawyers/macros.njk" as lawyersMacros %}
{% import "./macros.njk" as dashboardMacros %}
{% from "checkboxes/macro.njk" import govukCheckboxes %}

{% block header %}
  {% include "includes/header-list-mgmt.njk" %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row back-links__container">
    <aside class="govuk-grid-column-one-quarter">
      <a class="govuk-back-link" href="{{ dashboardRoutes.lists }}">Back</a>
      <form class="govuk-!-margin-top-4">
        {{ govukCheckboxes({
          name: "activity",
          fieldset: {
            legend: {
              text: "Activity status"
            }
          },
          items: activityStatus
        }) }}

        {{ govukCheckboxes({
          name: "publishing",
          fieldset: {
            legend: {
              text: "Publishing status"
            }
          },
          items: publishingStatus
        }) }}
        <button class="govuk-button">Apply filters</button>
      </form>
    </aside>

    <div class="govuk-grid-column-three-quarters">
      {% if messages.successBannerTitle %}
        {% set bannerHeading = _.capitalize(_.toLower(messages.successBannerHeading)) %}
        {% set title = messages.successBannerTitle %}
        {% set colourClass = ".govuk-tag--blue" %}
        {% if messages.successBannerColour === "green" %}
          {% set colourClass = ".govuk-tag--green" %}
        {% elseif messages.successBannerColour === "red" %}
          {% set colourClass = ".govuk-tag--red" %}
        {% endif %}
        {{ dashboardMacros.successBanner(bannerHeading, title, colourClass) }}
      {% endif %}

      <h1 class="govuk-heading-l">
        {{ _.startCase(list.type) }} {{ 'in' if list.country.name }} {{ list.country.name }}
      </h1>

      {% if list.items.length > 1 %}
        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
        <div class="govuk-body">The list is ordered with the most recent submissions and changes first</div>
      {% endif %}
      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
      {% if list.pinnedItems.length !== 0 %}
        <h2 class="govuk-heading-m">Pinned items</h2>
        <ul class="govuk-list dashboard__content-list dashboard__content-list--pinned">
          {% for listItem in list.pinnedItems %}
            {% set isPinned = true %}
            {% include "./partials/list-item-summary.njk" %}
          {% endfor %}
        </ul>
      {% endif %}

      {% if list.items.length === 0 %}
        <p class="govuk-body">This list is empty</p>
      {% else %}
        <ul class="govuk-list dashboard__content-list">
          {% for listItem in list.items %}
            {% set isPinned = false %}
            {% include "./partials/list-item-summary.njk" %}
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </div>
{% endblock %}

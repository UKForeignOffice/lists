{% extends "./dashboard.njk" %}
{% import "../lists/partials/covid-test-providers/macros.njk" as covidTestProvidersMacros %}
{% import "../lists/partials/lawyers/macros.njk" as lawyersMacros %}


{% block dashboard %}
  <h1 class="govuk-heading-l">
    {{ _.startCase(list.type) }} {{ 'in' if list.country.name }} {{ _.startCase(list.country.name) }}
  </h1>

  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

  <p class="govuk-body">
    Send this link to organisations or individuals so they can apply to be added to the list<br/>
    <a class="govuk-link" target="_blank" rel="noopener noreferrer" href="http{{ 's' if SERVICE_DOMAIN.indexOf('localhost') === -1 }}://{{SERVICE_DOMAIN}}/application/{{_.kebabCase(list.type)}}">
      http{{ 's' if SERVICE_DOMAIN.indexOf('localhost') === -1 }}://{{SERVICE_DOMAIN}}/application/{{_.kebabCase(list.type)}}
    </a>
  </p>

  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

  {% if listItems.length === 0 %}
    <p class="govuk-body">This list is empty</p>
  {% else %}
    <ul class="govuk-list dashboard__content-list">
      {% for listItem in listItems %}
        <li id="item-{{ listItem.id }}">
          {% if list.type === 'covidTestProviders' %}
            {{ covidTestProvidersMacros.covidTestProvidersListItem(listItem, true) }}
            {{ dashboardMacros.listItemActionsBart(list, listItem, dashboardRoutes, canApprove, canPublish) }}
          {% endif %}
          {% if list.type === 'lawyers' %}
            {{ lawyersMacros.lawyersListManagementItem(listItem) }}
            {# TODO: Re-enable publish when we're ready to go live #}
            {{ dashboardMacros.listItemActionsBart(list, listItem, dashboardRoutes, canApprove, false) }}
          {% endif %}
          <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock %}

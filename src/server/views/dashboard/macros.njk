{% from "button/macro.njk" import govukButton %}
{% from "warning-text/macro.njk" import govukWarningText %}
{% from "radios/macro.njk" import govukRadios %}
{% from "input/macro.njk" import govukInput %}


{% macro navMenu(title, path, req) %}
  <li>
    <a class="govuk-link {{ "govuk-link--no-underline" if req.path !== path }}" href="{{ path }}">
      {{ title }}
    </a>
  </li>
{% endmacro %}

{% macro successBanner(bannerHeading = "Success", title = "Saved successfully", colourClass = ".govuk-tag--green") %}
  <div class="govuk-notification-banner {{ colourClass }}" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
    <div class="govuk-notification-banner__header">
      <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
        {{ bannerHeading }}
      </h2>
    </div>
    <div class="govuk-notification-banner__content">
      <h3 class="govuk-notification-banner__heading">
        {{ title }}
      </h3>
    </div>
  </div>
{% endmacro %}

{% macro errorBanner(error) %}
  <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
    <h2 class="govuk-error-summary__title" id="error-summary-title">
      There is a problem
    </h2>
    <div class="govuk-error-summary__body">
      <ul class="govuk-list govuk-error-summary__list">
        <li>
          <a href="{{error.href}}">{{error.text}}</a>
        </li>
      </ul>
    </div>
  </div>
{% endmacro %}

{% macro listItemActionsBart(list, listItem, dashboardRoutes, canApprove, canPublish, titleProperty) %}
  <div class="govuk-!-margin-top-2">
    <div class="govuk-form-group">
      <a class="govuk-button govuk-button--secondary govuk-!-margin-bottom-2" href="{{ dashboardRoutes.listsItem.replace(':listId', list.id).replace(':listItemId', listItem.id) }}">Review</a>
    </div>
  </div>
{% endmacro %}

{% macro listItemEditActionBar(list, listItem, dashboardRoutes, titleProperty) %}
<div class="govuk-!-margin-top-8">
  <div class="govuk-form-group">
    <fieldset class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
        <h1 class="govuk-fieldset__heading">
          What would you like to do with this application?
        </h1>
      </legend>
      <div class="govuk-radios" data-module="govuk-radios">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-publish" name="action" type="radio" value="publish">
          <label class="govuk-label govuk-radios__label" for="action-publish">
            Publish
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-unpublish" name="action" type="radio" value="unpublish">
          <label class="govuk-label govuk-radios__label" for="action-unpublish">
            Unpublish
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-requestChanges" name="action" type="radio" value="requestChanges" data-aria-controls="conditional-action-edit">
          <label class="govuk-label govuk-radios__label" for="action-edit">
            Request changes
          </label>
        </div>
        <div class="govuk-radios__conditional" id="conditional-action-requestChanges">
          <div class="govuk-form-group">
            <div id="action-edit-hint" class="govuk-hint">
              Provide simple and concise instructions to the service provider on what they need to change.
            </div>
            <textarea class="govuk-textarea" id="message" name="message" rows="5" aria-describedby="action-requestChanges-hint"></textarea>
          </div>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-update" name="action" type="radio" value="update">
          <label class="govuk-label govuk-radios__label" for="action-update">
            Confirm and update
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-remove" name="action" type="radio" value="remove">
          <label class="govuk-label govuk-radios__label" for="action-remove">
            Remove application
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-pin" name="action" type="radio" value="pin">
          <label class="govuk-label govuk-radios__label" for="action-pin">
            Pin
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="action-pin" name="action" type="radio" value="unpin">
          <label class="govuk-label govuk-radios__label" for="action-pin">
            Unpin
          </label>
        </div>
      </div>
    </fieldset>
  </div>

  <div class="govuk-button-group">
    {{ govukButton({
      text: "Continue",
      classes: "govuk-button--ok govuk-!-margin-bottom-2",
      attributes: {
        id: ["action-button-", listItem.id] | join,
        "data-title": _.startCase(titleProperty),
        "data-id": listItem.id
      }
    }) }}
  </div>

</div>
{% endmacro %}


{% macro paginationSection(pagination) %}
  {% if pagination.results.count > 0 %}
    <div class="fcdo-pagination">
      <ul class="fcdo-pagination__list-items">
        {% if pagination.previous.href !== "" %}
          <li class="fcdo-pagination__item" id="prevButton">
            <a class="fcdo-pagination__link fcdo-pagination__item--prev" href="{{ pagination.previous.href }}">
              Previous
            </a>
          </li>
        {% endif %}
        {% if pagination.items.length > 1 %}
          {% for item in pagination.items %}
            {% set itemNumber = item.text | int  %}
            <li class="fcdo-pagination__item">
              {% if itemNumber === pagination.results.currentPage %}
                <span class="fcdo-pagination__item-current-page">
                  {{ item.text }}
                </span>
              {% else %}
                <a class="fcdo-pagination__link" href="{{ item.href }}">
                  {{ item.text }}
                </a>
              {% endif %}
            </li>
          {%  endfor %}
        {% endif %}
        {% if pagination.next.href !== "" %}
          <li class="fcdo-pagination__item" id="nextButton">
            <a class="fcdo-pagination__link fcdo-pagination__item--next fcdo-pagination__link--last" href="{{ pagination.next.href }}">
              Next
            </a>
          </li>
        {% endif %}
      </ul>
      <p class="fcdo-pagination__results">
        Showing <span class="fcdo-pagination__results-num">{{ pagination.results.from }}</span>
        to <span class="fcdo-pagination__results-num">{{ pagination.results.to }}</span>
        of <span class="fcdo-pagination__results-num">{{ pagination.results.count }}</span> results
      </p>
    </div>
  {% endif %}
{% endmacro %}

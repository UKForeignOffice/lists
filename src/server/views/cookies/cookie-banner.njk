<div id="cookie-banner-container" role="region" aria-label="Cookies on {{SERVICE_NAME}}">
  <div class="govuk-cookie-banner">
    <div class="govuk-cookie-banner__message govuk-width-container">

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <h2 class="govuk-cookie-banner__heading govuk-heading-m">Cookies on {{SERVICE_NAME}}</h2>

          <div class="govuk-cookie-banner__content">
            <p>We use some essential cookies to make this service work.</p>
            <p>Weâ€™d also like to use analytics cookies so we can understand how you use the service and make improvements.</p>
          </div>
        </div>
      </div>

      <div class="govuk-button-group">
        <button id="accept-analytics-cookies" type="button" name="cookies" class="govuk-button">
          Accept analytics cookies
        </button>
        <button id="reject-analytics-cookies" type="button" name="cookies" class="govuk-button">
          Reject analytics cookies
        </button>
        <a class="govuk-link" href="/help/cookies">View cookies</a>
      </div>
    </div>
  </div>
  <div class="govuk-cookie-banner no-js">
    <div class="govuk-cookie-banner__message govuk-width-container">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <h2 class="govuk-cookie-banner__heading govuk-heading-m">Cookies on {{SERVICE_NAME}}</h2>

          <div class="govuk-cookie-banner__content">
            <p class="govuk-body">We use cookies to make this service work and collect analytics information. To accept or reject cookies, please visit our <a class="govuk-link" href="/help/cookies">cookies page</a>.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script nonce="{{cspNonce}}">
  var acceptButton = document.getElementById("accept-analytics-cookies");
  var rejectButton = document.getElementById("reject-analytics-cookies");

  function toggleAnalyticsCookies(isOn) {
    fetch("/help/cookies", {
      method: "POST",
      credentials: 'same-origin',
      headers: {
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        analytics: isOn ? "on" : "off"
      })
    });
  }

  function removeCookieBanner() {
    var banner = document.querySelector(".govuk-cookie-banner");
    banner.style.display = 'none';
  }

  acceptButton.onclick = function acceptAnalyticsCookies(event) {
    event.stopPropagation();
    toggleAnalyticsCookies(true);
    removeCookieBanner();
  }

  rejectButton.onclick = function rejectAnalyticsCookies() {
    event.stopPropagation();
    toggleAnalyticsCookies(false);
    removeCookieBanner();
  }
</script>